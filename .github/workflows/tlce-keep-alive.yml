name: Scheduled Keep-Alive Ping
on:
  schedule:
    - cron: '*/12 * * * *'
  workflow_dispatch:
jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Send Request
        run: |
          if [ -z "${{ secrets.TRANSLX_URL }}" ]; then
            echo "‚ùå ERROR: Secret 'TRANSLX_URL' is missing from GitHub Settings"
            exit 1
          fi
          
          echo "üîÑ Pinging: ${{ secrets.TRANSLX_URL }}"
          
          # Remove -s to see errors, add --fail to exit on HTTP errors
          curl -v -L -o /dev/null \
            --fail \
            --retry 3 \
            --retry-delay 5 \
            --max-time 30 \
            -H "User-Agent: GitHubAction-KeepAlive" \
            "${{ secrets.TRANSLX_URL }}" || {
              echo "‚ùå Curl failed with exit code: $?"
              exit 1
            }
          
          echo "‚úÖ Ping successful"
